!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p:""};e.d({},{eF:function(){return fe}});var t=e.p+"7045fa3b47bd2995db1f.png",n=e.p+"609b6840c8b2e02c8ca9.png",r=e.p+"dce4b740e62b1039f7e1.png",o=e.p+"238958284f91ed63e920.png",i=document.querySelector(".profile__edit-button"),c=(document.querySelector(".popup__close"),document.querySelector(".popup__closeadd"),document.querySelector(".places")),u=document.querySelector("#plantilla"),a=(document.querySelector(".popup__form-profile"),document.querySelector(".popup__form-add"),document.querySelector(".profile__name"),document.querySelector(".profile__occupation"),document.querySelector("#name"),document.querySelector("#about"),document.querySelector("#place"),document.querySelector("#link"),document.querySelector(".profile__add-button")),s=document.querySelector(".profile__image-filter"),l=document.querySelector(".page"),f=e.p+"223f012ebd08f3266d8f.png";function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var h=function(){return e=function e(t,n,r,o,i,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.card=this.getTemplate(),this._likes=t.likes,this._id=t._id,this._name=t.name,this._link=t.link,this._owner=t.owner,this._userId=r,this._handleCardClick=n,this._handleDeleteLike=c,this._handleRemoveCard=o,this._handleAddLike=i},(t=[{key:"getTemplate",value:function(){return u.cloneNode(!0).content.querySelector(".places__card")}},{key:"setProperties",value:function(){var e=this;this._likeButton=this.card.querySelector(".places__button-like"),this._deleteButton=this.card.querySelector(".places__button-trash"),this._deleteBtnImg=this._deleteButton.querySelector(".places__imgtrash"),this._deleteBtnImg.src=f,this._image=this.card.querySelector(".places__image"),this._imgTitle=this.card.querySelector(".places__text"),this._likesCounter=this.card.querySelector(".places__likes"),this._image.src=this._link,this._imgTitle.textContent=this._name,this._image.alt=this._name,this._keyClose=l,this._likesCounter.textContent=this._likes.length,this._userId!==this._owner._id&&this._deleteButton.remove(),this.hasUserLiked=this._likes.some((function(t){return t._id===e._userId})),console.log(this._userId),this.hasUserLiked&&this._likeButton.classList.add("places__button-likeactive")}},{key:"handleDelete",value:function(){this._handleRemoveCard(this.card.remove())}},{key:"handleLike",value:function(){this._likeButton.classList.toggle("places__button-likeactive"),this._likeButton.classList.contains("places__button-likeactive")?this._handleAddLike(this._id):this._handleDeleteLike(this._id)}},{key:"updateLikeCounter",value:function(e){this._likesCounter.textContent=e.length,console.log("likes=> ",e)}},{key:"setEventListener",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e.handleLike()})),this._deleteButton.addEventListener("click",(function(){e.handleDelete()})),this._image.addEventListener("click",(function(){e._handleCardClick(e._link,e._name)}))}},{key:"createCard",value:function(){return this.setProperties(),this.setEventListener(),this.card}}])&&y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}var _=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._settings=t,this._formList=Array.from(document.querySelectorAll(this._settings.formSelector)),this._inputList=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)},(t=[{key:"_showInputError",value:function(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),this._errorMessage=e.validationMessage,e.classList.add(this._settings.inputErrorClass),this._errorElement.textContent=this._errorMessage}},{key:"_hideInputError",value:function(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._settings.inputErrorClass),this._errorElement.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._buttonElement.classList.add(this._settings.inactiveButtonClass):this._buttonElement.classList.remove(this._settings.inactiveButtonClass)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var E=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._pageFilter=document.querySelector(".page-filter"),this._inputKey=document.querySelector(".page"),this._closeBtn=this._popupElement.querySelector(".close"),this.addEventListeners()},(t=[{key:"open",value:function(){this._popupElement.classList.add("popup__show"),this._pageFilter.classList.add("popup__show")}},{key:"close",value:function(){this._popupElement.classList.remove("popup__show"),this._pageFilter.classList.remove("popup__show")}},{key:"handleClickOutside",value:function(){var e=this;this._pageFilter.addEventListener("click",(function(){e.close()}))}},{key:"handleEscapeKey",value:function(){var e=this;this._inputKey.addEventListener("keydown",(function(t){"Escape"===t.key&&e.close()}))}},{key:"addEventListeners",value:function(){var e=this;this._closeBtn.addEventListener("click",(function(){e.close()})),this.handleClickOutside(),this.handleEscapeKey()}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}function P(e,t,n){return t=I(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,n||[],I(e).constructor):t.apply(e,n))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(null,arguments)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}var B=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=P(this,t,[e]))._formElement=r._popupElement.querySelector(".form"),r._inputList=r._popupElement.querySelectorAll(".form__input"),r._handleFormSubmit=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),n=t,(r=[{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"close",value:function(){C(I(t.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(n){n.preventDefault(),console.log("que hay aqui"),e._handleFormSubmit(e.getInputValues()),C(I(t.prototype),"close",e).call(e)}))}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(E);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}function A(e,t,n){return t=F(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D()?Reflect.construct(t,n||[],F(e).constructor):t.apply(e,n))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(null,arguments)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var N=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=A(this,t,[e]))._image=n._popupElement.querySelector(".places__popupimg"),n._title=n._popupElement.querySelector(".places__popuptitle"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,(r=[{key:"handleOpen",value:function(e,n){x(F(t.prototype),"open",this).call(this),this._image.src=n,this._image.alt=e,this._title=e}},{key:"setEventListeners",value:function(){var e=this;x(F(t.prototype),"addEventListeners",this).call(this),this._image.addEventListener("click",(function(){e.handleOpen()}))}}])&&U(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(E);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function M(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}var H=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._selector=document.querySelector(n)},(t=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._selector.append(e)}}])&&J(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function Q(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}var W=function(){return e=function e(t){var n=t.nameSelector,r=t.descriptionSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._description=document.querySelector(r),this._img=document.querySelector(".profile__image")},(t=[{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._description.textContent=e.about,this._userId=e._id,this._owner=e.owner}},{key:"setUserAvatar",value:function(e){this._img.src=e}},{key:"getUserInfo",value:function(){return{userName:this._name.textContent,userAbout:this._description.textContent,userId:this._userId}}},{key:"getUserId",value:function(){return this._userId}}])&&G(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function Z(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==X(t)?t:t+""}var $=new(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers},(t=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally((function(){console.log("Bien hecho!!! Cartas iniciales listas")}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))})).then((function(e){fe.setUserAvatar(e.avatar),fe.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(e){}))}},{key:"editUserInfo",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))})).then((function(e){fe.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(){console.log("Bien hecho!!!")}))}},{key:"editUserAvatar",value:function(e){fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))})).then((function(e){console.log("Este es el avatar => ",e.avatar),fe.setUserAvatar(e.avatar)}))}},{key:"addCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)})).finally((function(){console.log("Bien hecho!!! carta nueva")}))}},{key:"removeCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))})).catch((function(e){console.log(e)})).finally((function(){}))}},{key:"addLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"removeLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&Y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web_es_11",headers:{authorization:"072a79cd-90d0-408b-be9c-36f27d8f66a3","Content-Type":"application/json"}});function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function ne(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ee(t)?t:t+""}function re(e,t,n){return t=ce(t),function(e,t){if(t&&("object"==ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,oe()?Reflect.construct(t,n||[],ce(e).constructor):t.apply(e,n))}function oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oe=function(){return!!e})()}function ie(){return ie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},ie.apply(null,arguments)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}var ae,se=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=re(this,t,[e])).handleConfirmation=n,r.confirmationBtn=document.querySelector(".popup__submit-confirmation"),r.formElement=r._popupElement.querySelector(".profile__form-confirmation"),r.cardId="",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e){this.cardId=e,ie(ce(t.prototype),"open",this).call(this)}},{key:"close",value:function(){ie(ce(t.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;ie(ce(t.prototype),"addEventListeners",this).call(this),this.formElement.addEventListener("submit",(function(){e.handleConfirmation(e.cardId),e.close()}))}}])&&te(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(E);document.getElementById("header_title").src=t,document.getElementById("profile__image"),document.getElementById("profile__editbutton-image").src=n,document.querySelector("#profile__addbutton-image").src=r,document.getElementById("close__image").src=o,document.getElementById("close__image1").src=o,document.getElementById("close__image2").src=o,document.getElementById("close__image3").src=o,document.getElementById("close__image4").src=o,ae={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__error"},Array.from(document.querySelectorAll(ae.formSelector)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),new _(ae,e)._setEventListeners()}));var le=new N(".card");le.setEventListeners();var fe=new W({nameSelector:".profile__name",descriptionSelector:".profile__occupation"});$.getInitialCards().then((function(e){var t=new H({items:e,renderer:function(e){var n=new h(e,(function(){le.handleOpen(e.name,e.link)}),fe._userId,(function(){he.open(n._id)}),(function(){$.addLike(n._id).then((function(e){n.updateLikeCounter(e.likes)}))}),(function(){$.removeLike(n._id).then((function(e){n.updateLikeCounter(e.likes)}))})),r=n.createCard();t.addItem(r)}},".places");t.renderItems()})),$.getUserInfo();var pe=new B("#profile-popup",(function(e){$.editUserInfo(e)}));pe.setEventListeners(),i.addEventListener("click",(function(){pe.open()}));var ye=new B("#avatar-popup",(function(e){$.editUserAvatar(e)}));ye.setEventListeners(),s.addEventListener("click",(function(){ye.open()}));var de=new B("#cards-popup",(function(e){$.addCard(e).then((function(e){var t=new h(e,(function(e,t){le.handleOpen(t,e)}),fe._userId,(function(){he.open(t._id)}),(function(){$.addLike(t._id).then((function(e){console.log(e),t.updateLikeCounter(e.likes)}))}),(function(){$.removeLike(t._id).then((function(e){t.updateLikeCounter(e.likes)}))}));console.log(fe._userId),c.prepend(t.createCard()),de.close()}))}));de.setEventListeners(),a.addEventListener("click",(function(){de.open()}));var he=new se(".card__popup-confirmation",(function(e){$.removeCard(e).then((function(){he.close()}))}));he.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVlaLE1BQ2QsSUFFQSxJQUFNYyxHQUFlLElBQUk5RixFQUFjLGdCQUFnQixTQUFDSixHQUN0RHdDLEVBQUkyRCxRQUFRbkcsR0FBTzhDLE1BQUssU0FBQ1UsR0FDdkIsSUFBTTRDLEVBQVUsSUFBSXBNLEVBQ2xCd0osR0FDQSxTQUFDNkMsRUFBT3BMLEdBQ042SixHQUFTM0QsV0FBV2xHLEVBQU1vTCxFQUM1QixHQUNBNUMsR0FBU3JJLFNBQ1QsV0FDRStKLEdBQWFDLEtBQUtnQixFQUFRdkwsSUFFNUIsSUFDQSxXQUNFMkgsRUFBSTZDLFFBQVFlLEVBQVF2TCxLQUFLaUksTUFBSyxTQUFDd0MsR0FDN0J6SSxRQUFRQyxJQUFJd0ksR0FDWmMsRUFBUWIsa0JBQWtCRCxFQUFTMUssTUFDckMsR0FDRixJQUNBLFdBQ0U0SCxFQUFJZ0QsV0FBV1ksRUFBUXZMLEtBQUtpSSxNQUFLLFNBQUN3QyxHQUNoQ2MsRUFBUWIsa0JBQWtCRCxFQUFTMUssTUFDckMsR0FDRixJQUVGaUMsUUFBUUMsSUFBSTJHLEdBQVNySSxTQUNyQnpCLEVBQVcyTSxRQUFRRixFQUFRVixjQUMzQlEsR0FBYW5HLE9BQ2YsR0FDRixJQUNBbUcsR0FBYW5CLG9CQUNibEwsRUFBVXdELGlCQUFpQixTQUFTLFdBQ2xDNkksR0FBYWQsTUFDZixJQUVPLElBQU1ELEdBQWUsSUFBSWYsR0FDOUIsNkJBQ0EsU0FBQ21DLEdBQ0MvRCxFQUFJZ0UsV0FBV0QsR0FBY3pELE1BQUssV0FDaENxQyxHQUFhcEYsT0FDZixHQUNGLElBRUZvRixHQUFhSixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9jb21wb25lbnRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5jb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuY29uc3QgY2xvc2VBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZWFkZFwiKTtcblxuY29uc3QgY2FyZFBsYWNlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzXCIpO1xuY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYW50aWxsYVwiKTtcbmNvbnN0IGZvcm1Qcm9maWxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tcHJvZmlsZVwiKTtcbmNvbnN0IGZvcm1BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1hZGRcIik7XG5jb25zdCBjaGFuZ2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgY2hhbmdlT2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fb2NjdXBhdGlvblwiKTtcbmNvbnN0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKTtcbmNvbnN0IGlucHV0T2NjdXBhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXRcIik7XG5jb25zdCBpbnB1dFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZVwiKTtcbmNvbnN0IGlucHV0SW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaW5rXCIpO1xuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgZWRpdEF2YXRhckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtZmlsdGVyXCIpO1xuXG5jb25zdCBpbnB1dEtleSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnZVwiKTtcblxuZXhwb3J0IHtcbiAgZWRpdEJ1dHRvbixcbiAgY2xvc2VCdXR0b24sXG4gIGNsb3NlQWRkQnV0dG9uLFxuICBjYXJkUGxhY2VzLFxuICB0ZW1wbGF0ZSxcbiAgZm9ybVByb2ZpbGVFbGVtZW50LFxuICBmb3JtQWRkQ2FyZCxcbiAgY2hhbmdlTmFtZSxcbiAgY2hhbmdlT2NjdXBhdGlvbixcbiAgaW5wdXROYW1lLFxuICBpbnB1dE9jY3VwYXRpb24sXG4gIGlucHV0VGl0bGUsXG4gIGlucHV0SW1nLFxuICBhZGRCdXR0b24sXG4gIGVkaXRBdmF0YXJCdG4sXG4gIGlucHV0S2V5LFxufTtcbiIsImltcG9ydCB7IHRlbXBsYXRlLCBpbnB1dEtleSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgdHJhc2hCdG5JbWdTcmMgZnJvbSBcIi4uL3NyYy9pbWFnZXMvVHJhc2gucG5nXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBpdGVtLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICB1c2VySUQsXG4gICAgaGFuZGxlUmVtb3ZlQ2FyZCxcbiAgICBoYW5kbGVBZGRMaWtlLFxuICAgIGhhbmRsZURlbGV0ZUxpa2VcbiAgKSB7XG4gICAgdGhpcy5jYXJkID0gdGhpcy5nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2xpa2VzID0gaXRlbS5saWtlcztcbiAgICB0aGlzLl9pZCA9IGl0ZW0uX2lkO1xuICAgIHRoaXMuX25hbWUgPSBpdGVtLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcbiAgICB0aGlzLl9vd25lciA9IGl0ZW0ub3duZXI7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklEO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVMaWtlID0gaGFuZGxlRGVsZXRlTGlrZTtcbiAgICB0aGlzLl9oYW5kbGVSZW1vdmVDYXJkID0gaGFuZGxlUmVtb3ZlQ2FyZDtcbiAgICB0aGlzLl9oYW5kbGVBZGRMaWtlID0gaGFuZGxlQWRkTGlrZTtcbiAgfVxuICBnZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2NhcmRcIik7XG4gIH1cbiAgc2V0UHJvcGVydGllcygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19idXR0b24tbGlrZVwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2J1dHRvbi10cmFzaFwiKTtcbiAgICB0aGlzLl9kZWxldGVCdG5JbWcgPSB0aGlzLl9kZWxldGVCdXR0b24ucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2ltZ3RyYXNoXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ0bkltZy5zcmMgPSB0cmFzaEJ0bkltZ1NyYztcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19faW1hZ2VcIik7XG4gICAgdGhpcy5faW1nVGl0bGUgPSB0aGlzLmNhcmQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX3RleHRcIik7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19saWtlc1wiKTtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltZ1RpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2tleUNsb3NlID0gaW5wdXRLZXk7XG5cbiAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuX3VzZXJJZCAhPT0gdGhpcy5fb3duZXIuX2lkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5oYXNVc2VyTGlrZWQgPSB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiB7XG4gICAgICByZXR1cm4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZDtcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLl91c2VySWQpO1xuICAgIGlmICh0aGlzLmhhc1VzZXJMaWtlZCkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicGxhY2VzX19idXR0b24tbGlrZWFjdGl2ZVwiKTtcbiAgICB9XG4gIH1cbiAgaGFuZGxlRGVsZXRlKCkge1xuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQodGhpcy5jYXJkLnJlbW92ZSgpKTtcbiAgfVxuICBoYW5kbGVMaWtlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcInBsYWNlc19fYnV0dG9uLWxpa2VhY3RpdmVcIik7XG4gICAgaWYgKCF0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInBsYWNlc19fYnV0dG9uLWxpa2VhY3RpdmVcIikpIHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUxpa2UodGhpcy5faWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlKHRoaXMuX2lkKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVMaWtlQ291bnRlcihsaWtlc0FycmF5KSB7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gbGlrZXNBcnJheS5sZW5ndGg7XG4gICAgY29uc29sZS5sb2coXCJsaWtlcz0+IFwiLCBsaWtlc0FycmF5KTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXIoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVMaWtlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZURlbGV0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKTtcbiAgICB9KTtcbiAgfVxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuc2V0UHJvcGVydGllcygpO1xuXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVyKCk7XG4gICAgcmV0dXJuIHRoaXMuY2FyZDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZ09iaiwgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3NldHRpbmdzID0gY29uZmlnT2JqO1xuICAgIHRoaXMuX2Zvcm1MaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuZm9ybVNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2Vycm9yTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcGFnZUZpbHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnZS1maWx0ZXJcIik7XG4gICAgdGhpcy5faW5wdXRLZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBhZ2VcIik7XG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZVwiKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX3Nob3dcIik7XG4gICAgdGhpcy5fcGFnZUZpbHRlci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfX3Nob3dcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19zaG93XCIpO1xuICAgIHRoaXMuX3BhZ2VGaWx0ZXIuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX19zaG93XCIpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2tPdXRzaWRlKCkge1xuICAgIHRoaXMuX3BhZ2VGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuICBoYW5kbGVFc2NhcGVLZXkoKSB7XG4gICAgdGhpcy5faW5wdXRLZXkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGlucHV0KSA9PiB7XG4gICAgICBpZiAoaW5wdXQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuaGFuZGxlQ2xpY2tPdXRzaWRlKCk7XG4gICAgdGhpcy5oYW5kbGVFc2NhcGVLZXkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBnZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc29sZS5sb2coXCJxdWUgaGF5IGFxdWlcIik7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICBzdXBlci5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fcG9wdXBpbWdcIik7XG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX3BvcHVwdGl0bGVcIik7XG4gIH1cblxuICBoYW5kbGVPcGVuKG5hbWUsIGxpbmspIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3RpdGxlID0gbmFtZTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlT3BlbigpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY3NzU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fc2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNzc1NlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fc2VsZWN0b3IuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjcmlwdGlvblNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuICB9XG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XG4gIH1cbiAgc2V0VXNlckF2YXRhcihzcmMpIHtcbiAgICB0aGlzLl9pbWcuc3JjID0gc3JjO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyTmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHVzZXJBYm91dDogdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXG4gICAgICB1c2VySWQ6IHRoaXMuX3VzZXJJZCxcbiAgICB9O1xuICB9XG4gIGdldFVzZXJJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xuICB9XG59XG4iLCJpbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XG5pbXBvcnQgeyBwb3B1cEltZywgcHJvZmlsZUltZyB9IGZyb20gXCIuLi9zcmMvaW5kZXguanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IHsgZWRpdEJ1dHRvbiwgYWRkQnV0dG9uIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IHVzZXJJbmZvIH0gZnJvbSBcIi4uL3NyYy9pbmRleC5qc1wiO1xuXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQmllbiBoZWNobyEhISBDYXJ0YXMgaW5pY2lhbGVzIGxpc3Rhc1wiKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlc3VsdC5hdmF0YXIpO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KChyZXN1bHQpID0+IHt9KTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzdWx0KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQmllbiBoZWNobyEhIVwiKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZWRpdFVzZXJBdmF0YXIoZGF0YSkge1xuICAgIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRXN0ZSBlcyBlbCBhdmF0YXIgPT4gXCIsIHJlc3VsdC5hdmF0YXIpO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlc3VsdC5hdmF0YXIpO1xuICAgICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJCaWVuIGhlY2hvISEhIGNhcnRhIG51ZXZhXCIpO1xuICAgICAgfSk7XG4gIH1cblxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7fSk7XG4gIH1cblxuICBhZGRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfMTFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiMDcyYTc5Y2QtOTBkMC00MDhiLWJlOWMtMzZmMjdkOGY2NmEzXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUNvbmZpcm1hdGlvbikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuaGFuZGxlQ29uZmlybWF0aW9uID0gaGFuZGxlQ29uZmlybWF0aW9uO1xuICAgIHRoaXMuY29uZmlybWF0aW9uQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19zdWJtaXQtY29uZmlybWF0aW9uXCJcbiAgICApO1xuICAgIHRoaXMuZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnByb2ZpbGVfX2Zvcm0tY29uZmlybWF0aW9uXCJcbiAgICApO1xuICAgIHRoaXMuY2FyZElkID0gXCJcIjtcbiAgfVxuICBvcGVuKGNhcmRJZCkge1xuICAgIHRoaXMuY2FyZElkID0gY2FyZElkO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlQ29uZmlybWF0aW9uKHRoaXMuY2FyZElkKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgaGVhZGVyU3JjIGZyb20gXCIuL2ltYWdlcy9oZWFkZXJfdGl0bGUucG5nXCI7XG4vLyBpbXBvcnQgcHJvZmlsZVNyYyBmcm9tIFwiLi9pbWFnZXMvQXZhdGFySmFjcXVlc19Db3VzdGVhdS5wbmdcIjtcbmltcG9ydCBwcmZsRWRpdEJ0bkltZ1NyYyBmcm9tIFwiLi9pbWFnZXMvRWRpdF9CdXR0b24ucG5nXCI7XG5pbXBvcnQgYWRkZEJ0bkltZ1NyYyBmcm9tIFwiLi9pbWFnZXMvQWRkX0J1dHRvbi5wbmdcIjtcbmltcG9ydCBjbG9zZUJ0bkltZ1NyYyBmcm9tIFwiLi9pbWFnZXMvQ2xvc2VfSWNvbi5wbmdcIjtcbmltcG9ydCB7XG4gIGVkaXRCdXR0b24sXG4gIGNhcmRQbGFjZXMsXG4gIGVkaXRBdmF0YXJCdG4sXG4gIGFkZEJ1dHRvbixcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXRpbHMuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5cbmNvbnN0IGhlYWRlckltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaGVhZGVyX3RpdGxlXCIpO1xuaGVhZGVySW1nLnNyYyA9IGhlYWRlclNyYztcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlX19pbWFnZVwiKTtcbi8vIHByb2ZpbGVJbWcuc3JjID0gcHJvZmlsZVNyYztcbmNvbnN0IHByZmxFZGl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlX19lZGl0YnV0dG9uLWltYWdlXCIpO1xucHJmbEVkaXRCdG4uc3JjID0gcHJmbEVkaXRCdG5JbWdTcmM7XG5jb25zdCBhZGRCdG5JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2FkZGJ1dHRvbi1pbWFnZVwiKTtcbmFkZEJ0bkltZy5zcmMgPSBhZGRkQnRuSW1nU3JjO1xuY29uc3QgY2xvc2VCdG5JbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlX19pbWFnZVwiKTtcbmNsb3NlQnRuSW1nLnNyYyA9IGNsb3NlQnRuSW1nU3JjO1xuY29uc3QgY2xvc2VCdG5JbWcxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZV9faW1hZ2UxXCIpO1xuY2xvc2VCdG5JbWcxLnNyYyA9IGNsb3NlQnRuSW1nU3JjO1xuY29uc3QgY2xvc2VCdG5JbWcyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZV9faW1hZ2UyXCIpO1xuY2xvc2VCdG5JbWcyLnNyYyA9IGNsb3NlQnRuSW1nU3JjO1xuY29uc3QgY2xvc2VCdG5JbWczID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZV9faW1hZ2UzXCIpO1xuY2xvc2VCdG5JbWczLnNyYyA9IGNsb3NlQnRuSW1nU3JjO1xuY29uc3QgY2xvc2VCdG5JbWc0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZV9faW1hZ2U0XCIpO1xuY2xvc2VCdG5JbWc0LnNyYyA9IGNsb3NlQnRuSW1nU3JjO1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xuICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgY29uc3QgbmV3VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcbiAgICBuZXdWYWxpZGF0b3IuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH0pO1xufTtcblxuZW5hYmxlVmFsaWRhdGlvbih7XG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc3VibWl0XCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0LWRpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JcIixcbn0pO1xuXG5leHBvcnQgY29uc3QgcG9wdXBJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIuY2FyZFwiKTtcbnBvcHVwSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19vY2N1cGF0aW9uXCIsXG59KTtcbmFwaS5nZXRJbml0aWFsQ2FyZHMoKS50aGVuKChyZXN1bHQpID0+IHtcbiAgY29uc3QgZGVmYXVsdENhcmRzID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgaXRlbXM6IHJlc3VsdCxcbiAgICAgIHJlbmRlcmVyOiAoZWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkcyA9IG5ldyBDYXJkKFxuICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgcG9wdXBJbWcuaGFuZGxlT3BlbihlbGVtZW50Lm5hbWUsIGVsZW1lbnQubGluayk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB1c2VySW5mby5fdXNlcklkLFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIHBvcHVwQ29uZmlybS5vcGVuKGNhcmRzLl9pZCk7XG4gICAgICAgICAgICAvL2FwaS5yZW1vdmVDYXJkKGNhcmRzLl9pZCk7XG4gICAgICAgICAgICAvLyBwb3B1cENvbmZpcm0ub3BlbigoKSA9PiB7fSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBhcGkuYWRkTGlrZShjYXJkcy5faWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmRzLnVwZGF0ZUxpa2VDb3VudGVyKHJlc3BvbnNlLmxpa2VzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgYXBpLnJlbW92ZUxpa2UoY2FyZHMuX2lkKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICBjYXJkcy51cGRhdGVMaWtlQ291bnRlcihyZXNwb25zZS5saWtlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZHMuY3JlYXRlQ2FyZCgpO1xuICAgICAgICBkZWZhdWx0Q2FyZHMuYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgXCIucGxhY2VzXCJcbiAgKTtcbiAgZGVmYXVsdENhcmRzLnJlbmRlckl0ZW1zKCk7XG59KTsgLy9jcmVhciBsYXMgY2FydGFzIGluaWNpYWxlc1xuYXBpLmdldFVzZXJJbmZvKCk7IC8vc2V0ZWFyIGxhIGluZm9ybWFjaW9uIGRlIHVzdWFyaW9cblxuLy9taSB0b2tlbiAwNzJhNzljZC05MGQwLTQwOGItYmU5Yy0zNmYyN2Q4ZjY2YTNcblxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1wb3B1cFwiLCAoaW5wdXQpID0+IHtcbiAgYXBpLmVkaXRVc2VySW5mbyhpbnB1dCk7XG59KTsgLy8gZWRpdGFyIG5vbWJyZSB5IG9jdXBhY2lvbiBkZSB1c3VhcmlvXG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhci1wb3B1cFwiLCAoaW5wdXQpID0+IHtcbiAgYXBpLmVkaXRVc2VyQXZhdGFyKGlucHV0KTtcbn0pOyAvL2VkaXRhciBhdmF0YXIgZGUgdXN1YXJpb1xucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRBdmF0YXJCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NhcmRzLXBvcHVwXCIsIChpbnB1dCkgPT4ge1xuICBhcGkuYWRkQ2FyZChpbnB1dCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxuICAgICAgcmVzdWx0LFxuICAgICAgKHRpdGxlLCBsaW5rKSA9PiB7XG4gICAgICAgIHBvcHVwSW1nLmhhbmRsZU9wZW4obGluaywgdGl0bGUpO1xuICAgICAgfSxcbiAgICAgIHVzZXJJbmZvLl91c2VySWQsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHBvcHVwQ29uZmlybS5vcGVuKG5ld0NhcmQuX2lkKTtcbiAgICAgICAgLy9hcGkucmVtb3ZlQ2FyZChuZXdDYXJkLl9pZCk7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICBhcGkuYWRkTGlrZShuZXdDYXJkLl9pZCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlQ291bnRlcihyZXNwb25zZS5saWtlcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgYXBpLnJlbW92ZUxpa2UobmV3Q2FyZC5faWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlQ291bnRlcihyZXNwb25zZS5saWtlcyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICk7IC8vLmNyZWF0ZUNhcmQoKTtcbiAgICBjb25zb2xlLmxvZyh1c2VySW5mby5fdXNlcklkKTtcbiAgICBjYXJkUGxhY2VzLnByZXBlbmQobmV3Q2FyZC5jcmVhdGVDYXJkKCkpO1xuICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xuICB9KTsgLy9tYW5kYSBQT1NUIGNvbiBsYSBjYXJ0YSBudWV2YSB5IGxhIGFncmVnYSB0YW1iaWVuIGRlIG1hbmVyYSBsb2NhbCB0ZW1wb3JhbFxufSk7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEFkZENhcmQub3BlbigpO1xufSk7XG5cbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBcIi5jYXJkX19wb3B1cC1jb25maXJtYXRpb25cIixcbiAgKGNhcmRUb0RlbGV0ZSkgPT4ge1xuICAgIGFwaS5yZW1vdmVDYXJkKGNhcmRUb0RlbGV0ZSkudGhlbigoKSA9PiB7XG4gICAgICBwb3B1cENvbmZpcm0uY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuKTtcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZWRpdEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhcmRQbGFjZXMiLCJ0ZW1wbGF0ZSIsImFkZEJ1dHRvbiIsImVkaXRBdmF0YXJCdG4iLCJpbnB1dEtleSIsIkNhcmQiLCJpdGVtIiwiaGFuZGxlQ2FyZENsaWNrIiwidXNlcklEIiwiaGFuZGxlUmVtb3ZlQ2FyZCIsImhhbmRsZUFkZExpa2UiLCJoYW5kbGVEZWxldGVMaWtlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImNhcmQiLCJnZXRUZW1wbGF0ZSIsIl9saWtlcyIsImxpa2VzIiwiX2lkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX293bmVyIiwib3duZXIiLCJfdXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVMaWtlIiwiX2hhbmRsZVJlbW92ZUNhcmQiLCJfaGFuZGxlQWRkTGlrZSIsInZhbHVlIiwiY2xvbmVOb2RlIiwiY29udGVudCIsIl90aGlzIiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwiX2RlbGV0ZUJ0bkltZyIsInNyYyIsInRyYXNoQnRuSW1nU3JjIiwiX2ltYWdlIiwiX2ltZ1RpdGxlIiwiX2xpa2VzQ291bnRlciIsInRleHRDb250ZW50IiwiYWx0IiwiX2tleUNsb3NlIiwibGVuZ3RoIiwicmVtb3ZlIiwiaGFzVXNlckxpa2VkIiwic29tZSIsImxpa2UiLCJjb25zb2xlIiwibG9nIiwiY2xhc3NMaXN0IiwiYWRkIiwidG9nZ2xlIiwiY29udGFpbnMiLCJsaWtlc0FycmF5IiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZUxpa2UiLCJoYW5kbGVEZWxldGUiLCJzZXRQcm9wZXJ0aWVzIiwic2V0RXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWdPYmoiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtTGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JFbGVtZW50IiwiY29uY2F0IiwiaWQiLCJfZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfcGFnZUZpbHRlciIsIl9pbnB1dEtleSIsIl9jbG9zZUJ0biIsImFkZEV2ZW50TGlzdGVuZXJzIiwiY2xvc2UiLCJpbnB1dCIsIl90aGlzMyIsImhhbmRsZUNsaWNrT3V0c2lkZSIsImhhbmRsZUVzY2FwZUtleSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2luaGVyaXRzIiwiX2Zvcm1WYWx1ZXMiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicmVzZXQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImdldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfdGl0bGUiLCJoYW5kbGVPcGVuIiwiU2VjdGlvbiIsIl9yZWYiLCJjc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfc2VsZWN0b3IiLCJlbGVtZW50IiwiYXBwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiX2Rlc2NyaXB0aW9uIiwiX2ltZyIsImRhdGEiLCJhYm91dCIsInVzZXJOYW1lIiwidXNlckFib3V0IiwidXNlcklkIiwiYXBpIiwiQXBpIiwib3B0aW9ucyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyb3IiLCJmaW5hbGx5IiwicmVzdWx0IiwidXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiYXZhdGFyIiwic2V0VXNlckluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJzZXR0aW5ncyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImhhbmRsZUNvbmZpcm1hdGlvbiIsImNvbmZpcm1hdGlvbkJ0biIsImdldEVsZW1lbnRCeUlkIiwiaGVhZGVyU3JjIiwicHJmbEVkaXRCdG5JbWdTcmMiLCJhZGRkQnRuSW1nU3JjIiwiY2xvc2VCdG5JbWdTcmMiLCJlcnJvckNsYXNzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBJbWciLCJzZXRFdmVudExpc3RlbmVycyIsImdldEluaXRpYWxDYXJkcyIsImRlZmF1bHRDYXJkcyIsImNhcmRzIiwicG9wdXBDb25maXJtIiwib3BlbiIsImFkZExpa2UiLCJyZXNwb25zZSIsInVwZGF0ZUxpa2VDb3VudGVyIiwicmVtb3ZlTGlrZSIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImdldFVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwiZWRpdFVzZXJJbmZvIiwicG9wdXBBdmF0YXIiLCJlZGl0VXNlckF2YXRhciIsInBvcHVwQWRkQ2FyZCIsImFkZENhcmQiLCJuZXdDYXJkIiwidGl0bGUiLCJwcmVwZW5kIiwiY2FyZFRvRGVsZXRlIiwicmVtb3ZlQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=